import { supabase } from '../config/supabase';\n\nexport const authService = {\n  // Login usando RPC para conectar com PostgreSQL\n  async login(username, password) {\n    try {\n      const { data, error } = await supabase.rpc('authenticate_user', {\n        p_username: username,\n        p_password: password\n      });\n\n      if (error) {\n        console.error('Erro de autenticação:', error);\n        return { success: false, error: 'Erro de conexão' };\n      }\n\n      if (data && data.length > 0) {\n        const user = data[0];\n        return {\n          success: true,\n          user: {\n            id: user.id,\n            username: user.username,\n            fullName: user.full_name,\n            team: user.team,\n            role: user.role\n          }\n        };\n      }\n\n      return { success: false, error: 'Usuário ou senha inválidos' };\n    } catch (error) {\n      console.error('Erro na autenticação:', error);\n      return { success: false, error: 'Erro de conexão com servidor' };\n    }\n  },\n\n  // Buscar tarefas do usuário\n  async getUserTasks(userId) {\n    try {\n      const { data, error } = await supabase.rpc('get_user_tasks', {\n        p_user_id: userId\n      });\n\n      if (error) {\n        console.error('Erro ao buscar tarefas:', error);\n        return { success: false, error: 'Erro ao carregar tarefas' };\n      }\n\n      return { success: true, tasks: data || [] };\n    } catch (error) {\n      console.error('Erro ao buscar tarefas:', error);\n      return { success: false, error: 'Erro de conexão' };\n    }\n  }\n};